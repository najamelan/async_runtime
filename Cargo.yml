package:

  # When releasing to crates.io:
  #
  # - Update CHANGELOG.md.
  # - Update version numbers in install section of readme.
  # - merge dev branch into master
  # - create git tag
  #
  version      : 0.4.0
  name         : naja_async_runtime
  authors      : [ Naja Melan <najamelan@autistici.org> ]
  edition      : '2018'
  description  : A lightweight universal runtime for futures.
  repository   : https://github.com/najamelan/async_runtime
  license      : Unlicense
  categories   : [ concurrency, asynchronous ]
  keywords     : [ runtime, async, futures ]
  readme       : README.md
  autoexamples : false

  metadata:
    docs:
      rs:
        features: [ external_doc, juliex ]


lib:

  name: async_runtime


badges:

  travis-ci   : { repository: najamelan/async_runtime }
  maintenance : { status    : actively-developed      }


features:

  default: [ macros ]
  macros : [ naja_runtime_macros ]

  juliex : [ juliex_crate, naja_runtime_macros/juliex ]

  # only used internally, don't use
  #
  notwasm: []

  # only used internally, don't use
  #
  external_doc: []


dependencies:

  failure             : { version: ^0.1, default-features: false, features: [ derive ] }
  futures-preview     : { version: ^0.3.0-alpha, features: [ std, compat, nightly ], default-features: false }
  once_cell           : { version: ^0.1, default-features: false }
  juliex_crate        : { version: ^0.3.0-alpha, optional: true, package: juliex }
  naja_runtime_macros : { path: macros, optional: true }


dev-dependencies:

  log               : ^0.4
  pretty_assertions : ^0.6
  # flexi_logger      : ^0.11


profile:

  release:

    codegen-units: 1
    # debug        : true


example:

  - name             : attribute
    path             : examples/attribute.rs
    required-features: [ notwasm ]

  - name             : localpool
    path             : examples/localpool.rs
    required-features: [ notwasm ]

  - name             : threadpool
    path             : examples/threadpool.rs
    required-features: [ notwasm, juliex ]


target:

  'cfg(target_arch = "wasm32")':

    dependencies:

      wasm-bindgen-futures: { version: ^0.4 }

    dev-dependencies:

      wasm-bindgen-test: ^0.3


